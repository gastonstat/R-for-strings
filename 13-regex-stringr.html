<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R for Strings - 13&nbsp; Regex Functions in "stringr"</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./14-regex-baser.html" rel="next">
<link href="./12-regex-boundaries.html" rel="prev">
<link href="./images/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-46765288', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Regex Functions in <code>"stringr"</code></span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Strings</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">About</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">I Characters in R</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introductory Appetizer</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-characters.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Character Strings in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-basic-manipulations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Basic Manipulations with <code>"base"</code> Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-stringr-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Basic Manipulations with <code>"stringr"</code> Functions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">II Print &amp; Format</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-printing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Formatting Text and Numbers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-sprintf.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">C-style Formatting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-input-output.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Input and Output</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">III Regex</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-regex-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Started with Regular Expressions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-regex-charsets.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Character Sets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-regex-anchors.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Anchors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-regex-quantifiers.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Quantifiers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-regex-boundaries.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Boundaries and Look Arounds</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-regex-stringr.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Regex Functions in <code>"stringr"</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-regex-baser.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Regex Functions in R</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">IV Applications</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-fun-plot1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Fun Plots (part 1)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-fun-plot2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Fun Plots (part 2)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-basic-examples.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Basic Examples</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-matching-html-tags.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Matching HTML Tags</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-data-cleaning.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Data Cleaning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-log-file.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Data Log File</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#detecting-patterns-with-str_detect" id="toc-detecting-patterns-with-str_detect" class="nav-link active" data-scroll-target="#detecting-patterns-with-str_detect"><span class="toc-section-number">13.1</span>  Detecting patterns with <code>str_detect()</code></a></li>
  <li><a href="#extract-first-match-with-str_extract" id="toc-extract-first-match-with-str_extract" class="nav-link" data-scroll-target="#extract-first-match-with-str_extract"><span class="toc-section-number">13.2</span>  Extract first match with <code>str_extract()</code></a></li>
  <li><a href="#extract-all-matches-with-str_extract_all" id="toc-extract-all-matches-with-str_extract_all" class="nav-link" data-scroll-target="#extract-all-matches-with-str_extract_all"><span class="toc-section-number">13.3</span>  Extract all matches with <code>str_extract_all()</code></a></li>
  <li><a href="#extract-first-match-group-with-str_match" id="toc-extract-first-match-group-with-str_match" class="nav-link" data-scroll-target="#extract-first-match-group-with-str_match"><span class="toc-section-number">13.4</span>  Extract first match group with <code>str_match()</code></a></li>
  <li><a href="#extract-all-matched-groups-with-str_match_all" id="toc-extract-all-matched-groups-with-str_match_all" class="nav-link" data-scroll-target="#extract-all-matched-groups-with-str_match_all"><span class="toc-section-number">13.5</span>  Extract all matched groups with <code>str_match_all()</code></a></li>
  <li><a href="#locate-first-match-with-str_locate" id="toc-locate-first-match-with-str_locate" class="nav-link" data-scroll-target="#locate-first-match-with-str_locate"><span class="toc-section-number">13.6</span>  Locate first match with <code>str_locate()</code></a></li>
  <li><a href="#locate-all-matches-with-str_locate_all" id="toc-locate-all-matches-with-str_locate_all" class="nav-link" data-scroll-target="#locate-all-matches-with-str_locate_all"><span class="toc-section-number">13.7</span>  Locate all matches with <code>str_locate_all()</code></a></li>
  <li><a href="#replace-first-match-with-str_replace" id="toc-replace-first-match-with-str_replace" class="nav-link" data-scroll-target="#replace-first-match-with-str_replace"><span class="toc-section-number">13.8</span>  Replace first match with <code>str_replace()</code></a></li>
  <li><a href="#replace-all-matches-with-str_replace_all" id="toc-replace-all-matches-with-str_replace_all" class="nav-link" data-scroll-target="#replace-all-matches-with-str_replace_all"><span class="toc-section-number">13.9</span>  Replace all matches with <code>str_replace_all()</code></a></li>
  <li><a href="#string-splitting-with-str_split" id="toc-string-splitting-with-str_split" class="nav-link" data-scroll-target="#string-splitting-with-str_split"><span class="toc-section-number">13.10</span>  String splitting with <code>str_split()</code></a></li>
  <li><a href="#string-splitting-with-str_split_fixed" id="toc-string-splitting-with-str_split_fixed" class="nav-link" data-scroll-target="#string-splitting-with-str_split_fixed"><span class="toc-section-number">13.11</span>  String splitting with <code>str_split_fixed()</code></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Regex Functions in <code>"stringr"</code></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>In the previous chapters we talked about regular expressions in general; we discussed the particular way in which R works with regex patterns; and we quickly presented some functions to manipulate strings with regular expressions. In this chapter we are going to describe in more detail the functions for regular expressions available in both the <code>"stringr"</code> package.</p>
<p>As you know, we have already presented some of the functions in the R package <code>"stringr"</code> for regular expressions. As we mentioned, all these functions share a common usage structure:</p>
<pre><code> str_function(string, pattern)</code></pre>
<p>The main two arguments are: a <code>string</code> vector to be processed, and a single <code>pattern</code> (i.e.&nbsp;regular expression) to match. Moreover, all the function names begin with the prefix <code>str_</code>, followed by the name of the action to be performed. For example, to locate the position of the first occurrence, we should use <code>str_locate()</code>; to locate the positions of all matches we should use <code>str_locate_all()</code>.</p>
<section id="detecting-patterns-with-str_detect" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="detecting-patterns-with-str_detect"><span class="header-section-number">13.1</span> Detecting patterns with <code>str_detect()</code></h2>
<p>For detecting whether a pattern is present (or absent) in a string vector, we can use the function <code>str_detect()</code>. Actually, this function is a wraper of <code>grepl()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># some objects</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>some_objs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"pen"</span>, <span class="st">"pencil"</span>, <span class="st">"marker"</span>, <span class="st">"spray"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># detect phones</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(some_objs, <span class="st">"pen"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select detected macthes</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>some_objs[<span class="fu">str_detect</span>(some_objs, <span class="st">"pen"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "pen"    "pencil"</code></pre>
</div>
</div>
<p>As you can see, the output of <code>str_detect()</code> is a boolean vector (<code>TRUE</code>/<code>FALSE</code>) of the same length as the specified <code>string</code>. You get a <code>TRUE</code> if a match is detected in a string, <code>FALSE</code> otherwise. Here’s another more elaborated example in which the pattern matches dates of the <em>form day-month-year</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># some strings</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>strings <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"12 Jun 2002"</span>, <span class="st">" 8 September 2004 "</span>, <span class="st">"22-July-2009 "</span>, </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">"01 01 2001"</span>, <span class="st">"date"</span>, <span class="st">"02.06.2000"</span>, </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">"xxx-yyy-zzzz"</span>, <span class="st">"$2,600"</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># date pattern (month as text)</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">=</span> <span class="st">"([0-9]{1,2})[- .]([a-zA-Z]+)[- .]([0-9]{4})"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># detect dates</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(strings, dates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
</section>
<section id="extract-first-match-with-str_extract" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="extract-first-match-with-str_extract"><span class="header-section-number">13.2</span> Extract first match with <code>str_extract()</code></h2>
<p>For extracting a string containing a pattern, we can use the function <code>str_extract()</code>. In fact, this function extracts the first piece of a string that matches a given pattern. For example, imagine that we have a character vector with some tweets about <em>Paris</em>, and that we want to extract the hashtags. We can do this simply by defining a <code>#hashtag</code> pattern like <code>#[a-zA-Z]{1}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tweets about 'Paris'</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>paris_tweets <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#Paris is chock-full of cultural and culinary attractions"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Some time in #Paris along Canal St.-Martin famous by #Amelie"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"While you're in #Paris, stop at cafe: http://goo.gl/yaCbW"</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Paris, the city of light"</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># hashtag pattern</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>hash <span class="ot">&lt;-</span> <span class="st">"#[a-zA-Z]{1,}"</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># extract (first) hashtag</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(paris_tweets, hash)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "#Paris" "#Paris" "#Paris" NA      </code></pre>
</div>
</div>
<p>As you can tell, the output of <code>str_extract()</code> is a vector of same length as <code>string</code>. Those elements that don’t match the pattern are indicated as <code>NA</code>. Note that <code>str_extract()</code> only matches the first pattern: it didn’t extract the hashtag <code>"#Amelie"</code>.</p>
</section>
<section id="extract-all-matches-with-str_extract_all" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="extract-all-matches-with-str_extract_all"><span class="header-section-number">13.3</span> Extract all matches with <code>str_extract_all()</code></h2>
<p>In addition to <code>str_extract()</code>, <code>"stringr"</code> also provides the function <code>str_extract_all()</code>. As its name indicates, we use <code>str_extract_all()</code> to extract <strong>all</strong> patterns in a vector <code>string</code>. Taking the same string as in the previous example, we can extract all the hashtag matches like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract (all) hashtags</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(paris_tweets, <span class="st">"#[a-zA-Z]{1,}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "#Paris"

[[2]]
[1] "#Paris"  "#Amelie"

[[3]]
[1] "#Paris"

[[4]]
character(0)</code></pre>
</div>
</div>
<p>Compared to <code>str_extract()</code>, the output of <code>str_extract_all()</code> is a <strong>list</strong> of same length as <code>string</code>. In addition, those elements that don’t match the pattern are indicated with an empty character vector <code>character(0)</code> instead of <code>NA</code>.</p>
</section>
<section id="extract-first-match-group-with-str_match" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="extract-first-match-group-with-str_match"><span class="header-section-number">13.4</span> Extract first match group with <code>str_match()</code></h2>
<p>Closely related to <code>str_extract()</code> the package <code>"stringr"</code> offers another extracting function: <code>str_match()</code>. This function not only extracts the matched pattern but it also shows each of the matched groups in a regex character class pattern.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># string vector</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>strings <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"12 Jun 2002"</span>, <span class="st">" 8 September 2004 "</span>, <span class="st">"22-July-2009 "</span>, </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">"01 01 2001"</span>, <span class="st">"date"</span>, <span class="st">"02.06.2000"</span>, </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">"xxx-yyy-zzzz"</span>, <span class="st">"$2,600"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># date pattern (month as text)</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">=</span> <span class="st">"([0-9]{1,2})[- .]([a-zA-Z]+)[- .]([0-9]{4})"</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># extract first matched group</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str_match</span>(strings, dates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]               [,2] [,3]        [,4]  
[1,] "12 Jun 2002"      "12" "Jun"       "2002"
[2,] "8 September 2004" "8"  "September" "2004"
[3,] "22-July-2009"     "22" "July"      "2009"
[4,] NA                 NA   NA          NA    
[5,] NA                 NA   NA          NA    
[6,] NA                 NA   NA          NA    
[7,] NA                 NA   NA          NA    
[8,] NA                 NA   NA          NA    </code></pre>
</div>
</div>
<p>Note that the output is not a vector but a character matrix. The first column is the complete match, the other columns are each of the captured groups. For those unmatched elements, there is a missing value <code>NA</code>.</p>
</section>
<section id="extract-all-matched-groups-with-str_match_all" class="level2" data-number="13.5">
<h2 data-number="13.5" class="anchored" data-anchor-id="extract-all-matched-groups-with-str_match_all"><span class="header-section-number">13.5</span> Extract all matched groups with <code>str_match_all()</code></h2>
<p>If what we’re looking for is extracting <strong>all</strong> patterns in a string vector, instead of using <code>str_extract()</code> we should use <code>str_extract_all()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tweets about 'Paris'</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>paris_tweets <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#Paris is chock-full of cultural and culinary attractions"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Some time in #Paris along Canal St.-Martin famous by #Amelie"</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"While you're in #Paris, stop at cafe: http://goo.gl/yaCbW"</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Paris, the city of light"</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># match (all) hashtags in 'paris_tweets'</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str_match_all</span>(paris_tweets, <span class="st">"#[a-zA-Z]{1,}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
     [,1]    
[1,] "#Paris"

[[2]]
     [,1]     
[1,] "#Paris" 
[2,] "#Amelie"

[[3]]
     [,1]    
[1,] "#Paris"

[[4]]
     [,1]</code></pre>
</div>
</div>
<p>Compared to <code>str_match()</code>, the output of <code>str_match_all()</code> is a <strong>list.</strong> Note al also that each element of the list is a matrix with as many rows as hashtag matches. In turn, those elements that don’t match the pattern are indicated with an empty character vector <code>character(0)</code> instead of a <code>NA</code>.</p>
</section>
<section id="locate-first-match-with-str_locate" class="level2" data-number="13.6">
<h2 data-number="13.6" class="anchored" data-anchor-id="locate-first-match-with-str_locate"><span class="header-section-number">13.6</span> Locate first match with <code>str_locate()</code></h2>
<p>Besides detecting, extracting and matching regex patterns, <code>"stringr"</code> allows us to <em>locate</em> occurrences of patterns. For locating the position of the <strong>first</strong> occurrence of a pattern in a string vector, we should use <code>str_locate()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># locate position of (first) hashtag</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_locate</span>(paris_tweets, <span class="st">"#[a-zA-Z]{1,}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     start end
[1,]     1   6
[2,]    14  19
[3,]    17  22
[4,]    NA  NA</code></pre>
</div>
</div>
<p>The output of <code>str_locate()</code> is a matrix with two columns and as many rows as elements in the (string) vector. The first column of the output is the <code>start</code> position, while the second column is the <code>end</code> position.</p>
<p>In the previous example, the result is a matrix with 4 rows and 2 columns. The first row corresponds to the hashtag of the first tweet. It starts at position 1 and ends at position 6. The second row corresponds to the hashtag of the second tweet; its start position is the 14th character, and its end position is the 19th character. The fourth row corresponds to the fourth tweet. Since there are no hashtags the values in that row are <code>NA</code>’s.</p>
</section>
<section id="locate-all-matches-with-str_locate_all" class="level2" data-number="13.7">
<h2 data-number="13.7" class="anchored" data-anchor-id="locate-all-matches-with-str_locate_all"><span class="header-section-number">13.7</span> Locate all matches with <code>str_locate_all()</code></h2>
<p>To locate not just the first but all the occurrence patterns in a string vector, we should use <code>str_locate_all()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># locate (all) hashtags in 'paris_tweets'</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_locate_all</span>(paris_tweets, <span class="st">"#[a-zA-Z]{1,}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
     start end
[1,]     1   6

[[2]]
     start end
[1,]    14  19
[2,]    54  60

[[3]]
     start end
[1,]    17  22

[[4]]
     start end</code></pre>
</div>
</div>
<p>Compared to <code>str_locate()</code>, the output of <code>str_locate_all()</code> is a <strong>list</strong> of the same length as the provided <code>string</code>. Each of the list elements is in turn a matrix with two columns. Those elements that don’t match the pattern are indicated with an empty character vector instead of an <code>NA</code>.</p>
<p>Looking at the obtained result from applying <code>str_locate_all()</code> to <code>paris_tweets</code>, you can see that the second element contains the start and end positions for both hashtags <code>#Paris</code> and <code>#Amelie</code>. In turn, the fourth element appears empty since its associated tweet contains no hashtags.</p>
</section>
<section id="replace-first-match-with-str_replace" class="level2" data-number="13.8">
<h2 data-number="13.8" class="anchored" data-anchor-id="replace-first-match-with-str_replace"><span class="header-section-number">13.8</span> Replace first match with <code>str_replace()</code></h2>
<p>For replacing the <strong>first</strong> occurrence of a matched pattern in a string, we can use <code>str_replace()</code>. Its usage has the following form:</p>
<pre><code>str_replace(string, pattern, replacement)</code></pre>
<p>In addition to the main 2 inputs of the rest of functions, <code>str_replace()</code> requires a third argument that indicates the <strong>replacement</strong> pattern.</p>
<p>Say we have the city names of San Francisco, Barcelona, Naples and Paris in a vector. And let’s suppose that we want to replace the first vowel in each name with a semicolon. Here’s how we can do that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># city names</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"San Francisco"</span>, <span class="st">"Barcelona"</span>, <span class="st">"Naples"</span>, <span class="st">"Paris"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># replace first matched vowel</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(cities, <span class="st">"[aeiou]"</span>, <span class="st">";"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "S;n Francisco" "B;rcelona"     "N;ples"        "P;ris"        </code></pre>
</div>
</div>
<p>Now, suppose that we want to replace the first consonant in each name. We just need to modify the <code>pattern</code> with a negated class:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace first matched consonant</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(cities, <span class="st">"[^aeiou]"</span>, <span class="st">";"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] ";an Francisco" ";arcelona"     ";aples"        ";aris"        </code></pre>
</div>
</div>
</section>
<section id="replace-all-matches-with-str_replace_all" class="level2" data-number="13.9">
<h2 data-number="13.9" class="anchored" data-anchor-id="replace-all-matches-with-str_replace_all"><span class="header-section-number">13.9</span> Replace all matches with <code>str_replace_all()</code></h2>
<p>For replacing <strong>all</strong> occurrences of a matched pattern in a string, we can use <code>str_replace_all()</code>. Once again, consider a vector with some city names, and let’s suppose that we want to replace all the vowels in each name:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># city names</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"San Francisco"</span>, <span class="st">"Barcelona"</span>, <span class="st">"Naples"</span>, <span class="st">"Paris"</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># replace all matched vowel</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(cities, <span class="at">pattern=</span><span class="st">"[aeiou]"</span>, <span class="st">";"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "S;n Fr;nc;sc;" "B;rc;l;n;"     "N;pl;s"        "P;r;s"        </code></pre>
</div>
</div>
<p>Alternatively, to replace all consonants with a semicolon in each name, we just need to change the <code>pattern</code> with a negated class:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace all matched consonants</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(cities, <span class="at">pattern=</span><span class="st">"[^aeiou]"</span>, <span class="st">";"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] ";a;;;;a;;i;;o" ";a;;e;o;a"     ";a;;e;"        ";a;i;"        </code></pre>
</div>
</div>
</section>
<section id="string-splitting-with-str_split" class="level2" data-number="13.10">
<h2 data-number="13.10" class="anchored" data-anchor-id="string-splitting-with-str_split"><span class="header-section-number">13.10</span> String splitting with <code>str_split()</code></h2>
<p>Similar to <code>strsplit()</code>, <code>"stringr"</code> gives us the function <code>str_split()</code> to separate a character vector into a number of pieces. This function has the following usage:</p>
<pre><code>str_split(string, pattern, n = Inf)</code></pre>
<p>The argument <code>n</code> is the maximum number of pieces to return. The default value (<code>n= Inf</code>) implies that all possible split positions are used.</p>
<p>Let’s see the same example of <code>strsplit()</code> in which we wish to split up a sentence into individuals words:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a sentence</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>sentence <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"R is a collaborative project with many contributors"</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># split into words</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(sentence, <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "R"             "is"            "a"             "collaborative"
[5] "project"       "with"          "many"          "contributors" </code></pre>
</div>
</div>
<p>Likewise, we can break apart the portions of a telephone number by splitting those sets of digits joined by a dash <code>"-"</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># telephone numbers</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>tels <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"510-548-2238"</span>, <span class="st">"707-231-2440"</span>, <span class="st">"650-752-1300"</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># split each number into its portions</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(tels, <span class="st">"-"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "510"  "548"  "2238"

[[2]]
[1] "707"  "231"  "2440"

[[3]]
[1] "650"  "752"  "1300"</code></pre>
</div>
</div>
<p>The result is a <strong>list</strong> of character vectors. Each element of the string vector corre- sponds to an element in the resulting list. In turn, each of the list elements will contain the split vectors (i.e.&nbsp;number of pieces) occurring from the matches.</p>
<p>In order to show the use of the argument <code>n</code>, let’s consider a vector with flavors <code>"chocolate"</code>, <code>"vanilla"</code>, <code>"cinnamon"</code>, <code>"mint"</code>, and <code>"lemon"</code>. Suppose we want to split each flavor name defining as pattern the class of vowels:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># string</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>flavors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"chocolate"</span>, <span class="st">"vanilla"</span>, <span class="st">"cinnamon"</span>, <span class="st">"mint"</span>, <span class="st">"lemon"</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># split by vowels</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(flavors, <span class="st">"[aeiou]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "ch" "c"  "l"  "t"  ""  

[[2]]
[1] "v"  "n"  "ll" ""  

[[3]]
[1] "c"  "nn" "m"  "n" 

[[4]]
[1] "m"  "nt"

[[5]]
[1] "l" "m" "n"</code></pre>
</div>
</div>
<p>Now let’s modify the maximum number of pieces to <code>n = 2</code>. This means that <code>str_split()</code> will split each element into a maximum of 2 pieces. Here’s what we obtain:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># split by first vowel</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(flavors, <span class="st">"[aeiou]"</span>, <span class="at">n=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "ch"     "colate"

[[2]]
[1] "v"     "nilla"

[[3]]
[1] "c"      "nnamon"

[[4]]
[1] "m"  "nt"

[[5]]
[1] "l"   "mon"</code></pre>
</div>
</div>
</section>
<section id="string-splitting-with-str_split_fixed" class="level2" data-number="13.11">
<h2 data-number="13.11" class="anchored" data-anchor-id="string-splitting-with-str_split_fixed"><span class="header-section-number">13.11</span> String splitting with <code>str_split_fixed()</code></h2>
<p>In addition to <code>str_split()</code>, there is also the <code>str_split_fixed()</code> function that splits up a string into a fixed number of pieces. Its usage has the following form:</p>
<pre><code>str_split_fixed(string, pattern, n)</code></pre>
<p>Note that the argument <code>n</code> does not have a default value. In other words, we need to specify an integer to indicate the number of pieces.</p>
<p>Consider again the same vector of <code>flavors</code>, and the letter <code>"n"</code> as the pattern to match. Let’s see the behavior of <code>str_split_fixed()</code> with <code>n = 2</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># string</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>flavors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"chocolate"</span>, <span class="st">"vanilla"</span>, <span class="st">"cinnamon"</span>, <span class="st">"mint"</span>, <span class="st">"lemon"</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># split flavors into 2 pieces</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split_fixed</span>(flavors, <span class="st">"n"</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]        [,2]   
[1,] "chocolate" ""     
[2,] "va"        "illa" 
[3,] "ci"        "namon"
[4,] "mi"        "t"    
[5,] "lemo"      ""     </code></pre>
</div>
</div>
<p>The output is a character matrix with as many columns as <code>n = 2</code>. Since <code>"chocolate"</code> does not contain any letter <code>"n"</code>, its corresponding value in the second column remains empty <code>""</code>. In contrast, the value of the second column associated to <code>"lemon"</code> is also empty. But this is because this flavor is split up into <code>"lemo"</code> and <code>""</code>.</p>
<p>If we change the value <code>n = 3</code>, we will obtain a matrix with three columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># split favors into 3 pieces</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split_fixed</span>(flavors, <span class="st">"n"</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]        [,2]   [,3]  
[1,] "chocolate" ""     ""    
[2,] "va"        "illa" ""    
[3,] "ci"        ""     "amon"
[4,] "mi"        "t"    ""    
[5,] "lemo"      ""     ""    </code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./12-regex-boundaries.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Boundaries and Look Arounds</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./14-regex-baser.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Regex Functions in R</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2024, <a href="https://www.gastonsanchez.com">Gaston Sanchez</a></div>   
    <div class="nav-footer-right"><a href="https://www.paypal.com/donate?business=ZF6U7K5MW25W2&amp;currency_code=USD" target="_blank">Donate via PayPal</a></div>
  </div>
</footer>



</body></html>