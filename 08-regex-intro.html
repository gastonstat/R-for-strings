<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R for Strings - 8&nbsp; Getting Started with Regular Expressions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./09-regex-charsets.html" rel="next">
<link href="./07-input-output.html" rel="prev">
<link href="./images/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-46765288', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Started with Regular Expressions</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Strings</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">About</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">I Characters in R</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introductory Appetizer</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-characters.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Character Strings in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-basic-manipulations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Basic Manipulations with <code>"base"</code> Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-stringr-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Basic Manipulations with <code>"stringr"</code> Functions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">II Print &amp; Format</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-printing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Formatting Text and Numbers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-sprintf.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">C-style Formatting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-input-output.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Input and Output</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">III Regex</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-regex-intro.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Started with Regular Expressions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-regex-charsets.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Character Sets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-regex-anchors.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Anchors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-regex-quantifiers.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Quantifiers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-regex-boundaries.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Boundaries and Look Arounds</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-regex-stringr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Regex Functions in <code>"stringr"</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-regex-baser.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Regex Functions in R</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">IV Applications</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-fun-plot1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Fun Plots (part 1)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-fun-plot2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Fun Plots (part 2)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-basic-examples.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Basic Examples</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-matching-html-tags.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Matching HTML Tags</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-data-cleaning.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Data Cleaning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-log-file.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Data Log File</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#what-are-regular-expressions" id="toc-what-are-regular-expressions" class="nav-link active" data-scroll-target="#what-are-regular-expressions"><span class="toc-section-number">8.1</span>  What are Regular Expressions?</a>
  <ul class="collapse">
  <li><a href="#what-are-regular-expressions-used-for" id="toc-what-are-regular-expressions-used-for" class="nav-link" data-scroll-target="#what-are-regular-expressions-used-for"><span class="toc-section-number">8.1.1</span>  What are Regular Expressions used for?</a></li>
  <li><a href="#a-word-of-caution-about-regex" id="toc-a-word-of-caution-about-regex" class="nav-link" data-scroll-target="#a-word-of-caution-about-regex"><span class="toc-section-number">8.1.2</span>  A word of caution about regex</a></li>
  <li><a href="#about-regular-expressions-in-r" id="toc-about-regular-expressions-in-r" class="nav-link" data-scroll-target="#about-regular-expressions-in-r"><span class="toc-section-number">8.1.3</span>  About Regular Expressions in R</a></li>
  </ul></li>
  <li><a href="#regex-basics" id="toc-regex-basics" class="nav-link" data-scroll-target="#regex-basics"><span class="toc-section-number">8.2</span>  Regex Basics</a></li>
  <li><a href="#literal-characters" id="toc-literal-characters" class="nav-link" data-scroll-target="#literal-characters"><span class="toc-section-number">8.3</span>  Literal Characters</a>
  <ul class="collapse">
  <li><a href="#matching-literal-characters" id="toc-matching-literal-characters" class="nav-link" data-scroll-target="#matching-literal-characters"><span class="toc-section-number">8.3.1</span>  Matching Literal Characters</a></li>
  </ul></li>
  <li><a href="#r-functions-for-regular-expressions" id="toc-r-functions-for-regular-expressions" class="nav-link" data-scroll-target="#r-functions-for-regular-expressions"><span class="toc-section-number">8.4</span>  R Functions for Regular Expressions</a>
  <ul class="collapse">
  <li><a href="#regex-functions-in-base-package" id="toc-regex-functions-in-base-package" class="nav-link" data-scroll-target="#regex-functions-in-base-package"><span class="toc-section-number">8.4.1</span>  Regex Functions in <code>"base"</code> Package</a></li>
  <li><a href="#regex-functions-in-package-stringr" id="toc-regex-functions-in-package-stringr" class="nav-link" data-scroll-target="#regex-functions-in-package-stringr"><span class="toc-section-number">8.4.2</span>  Regex Functions in Package <code>"stringr"</code></a></li>
  <li><a href="#matching-literal-characters-with-stringr-functions" id="toc-matching-literal-characters-with-stringr-functions" class="nav-link" data-scroll-target="#matching-literal-characters-with-stringr-functions"><span class="toc-section-number">8.4.3</span>  Matching Literal Characters With <code>"stringr"</code> Functions</a></li>
  </ul></li>
  <li><a href="#metacharacters" id="toc-metacharacters" class="nav-link" data-scroll-target="#metacharacters"><span class="toc-section-number">8.5</span>  Metacharacters</a>
  <ul class="collapse">
  <li><a href="#about-metacharacters" id="toc-about-metacharacters" class="nav-link" data-scroll-target="#about-metacharacters"><span class="toc-section-number">8.5.1</span>  About Metacharacters</a></li>
  </ul></li>
  <li><a href="#the-wildcard-metacharacter" id="toc-the-wildcard-metacharacter" class="nav-link" data-scroll-target="#the-wildcard-metacharacter"><span class="toc-section-number">8.6</span>  The Wildcard Metacharacter</a>
  <ul class="collapse">
  <li><a href="#escaping-metacharacters" id="toc-escaping-metacharacters" class="nav-link" data-scroll-target="#escaping-metacharacters"><span class="toc-section-number">8.6.1</span>  Escaping metacharacters</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="regex1" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Started with Regular Expressions</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>So far you have learned some basic and intermediate functions for handling and working with text in R. These are very useful functions and they allow you to do many interesting things. However, if you truly want to unleash the power of strings manipulation, you need to take things to the next level and learn about <em>regular expressions</em>.</p>
<p>In this chapter, we use functions from the package <code>"stringr"</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="what-are-regular-expressions" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="what-are-regular-expressions"><span class="header-section-number">8.1</span> What are Regular Expressions?</h2>
<p>The name “Regular Expression” does not say much. However, regular expressions are all about text. Think about how much text is all around you in our modern digital world: email, text messages, news articles, blogs, computer code, contacts in your address book—all these things are text. Regular expressions are a tool that allows us to work with these text by describing text patterns.</p>
<p>A <strong>regular expression</strong> is a special text string for describing a certain amount of text. This “certain amount of text” receives the formal name of <em>pattern</em>. In other words, a regular expression is a set of symbols that describes a text pattern. More formally we say that a regular expression is a <em>pattern that describes a set of strings</em>. In addition to this first meaning, the term regular expression can also be used in a slightly different but related way: as the formal language of these symbols that needs to be interpreted by a regular expression processor. Because the term “regular expression” is rather long, most people use the word <strong>regex</strong> as a shortcut term. And you will even find the plural <em>regexes</em>.</p>
<p>It is also worth noting what regular expressions are not. They’re not a programming language. They may look like some sort of programming language because they are a formal language with a defined set of rules that gets a computer to do what we want it to do. However, there are no variables in regex and you can’t do computations like adding 1 + 1.</p>
<section id="what-are-regular-expressions-used-for" class="level3" data-number="8.1.1">
<h3 data-number="8.1.1" class="anchored" data-anchor-id="what-are-regular-expressions-used-for"><span class="header-section-number">8.1.1</span> What are Regular Expressions used for?</h3>
<p>We use regular expressions to work with text. Some of its common uses involve testing if a phone number has the correct number of digits, if a date follows a specifc format (e.g.&nbsp;mm/dd/yy), if an email address is in a valid format, or if a password has numbers and special characters. You could also use regular expressions to search a document for <em>gray</em> spelt either as “gray” or “grey”. You could search a document and replace all occurrences of “Will”, “Bill”, or “W.” with William. Or you could count the number of times in a document that the word “analysis” is immediately preceded by the words “data”, “computer” or “statistical” only in those cases. You could use it to convert a comma-delimited file into a tab-delimited file or to find duplicate words in a text.</p>
<p>In each of these cases, you are going to use a regular expression to write up a description of what you are looking for using symbols. In the case of a phone number, that pattern might be three digits followed by a dash, followed by three digits and another dash, followed by four digits. Once you have defined a pattern then the regex processor will use our description to return matching results, or in the case of the test, to return true or false for whether or not it matched.</p>
</section>
<section id="a-word-of-caution-about-regex" class="level3" data-number="8.1.2">
<h3 data-number="8.1.2" class="anchored" data-anchor-id="a-word-of-caution-about-regex"><span class="header-section-number">8.1.2</span> A word of caution about regex</h3>
<p>If you have never used regular expressions before, their syntax may seem a bit scary and cryptic. You will see strings formed by a bunch of letters, digits, and other punctuation symbols combined in seemingly nonsensical ways. As with any other topic that has to do with programming and data analysis, learning the principles of regex and becoming fluent in defining regex patterns takes time and requires a lot of practice. The more you use them, the better you will become at defining more complex patterns and getting the most out of them.</p>
<p>Regular Expressions is a wide topic and there are books entirely dedicated to this subject. The material offered in this book is not extensive and there are many subtopics that I don’t cover here. Despite the initial barriers that you may encounter when entering the regex world, the pain and frustration of learning this tool will payoff in your data science career.</p>
</section>
<section id="about-regular-expressions-in-r" class="level3" data-number="8.1.3">
<h3 data-number="8.1.3" class="anchored" data-anchor-id="about-regular-expressions-in-r"><span class="header-section-number">8.1.3</span> About Regular Expressions in R</h3>
<p>Tools for working with regular expressions can be found in virtually all scripting languages (e.g.&nbsp;Perl, Python, Java, Ruby, etc). R has some functions for working with regular expressions but it does not provide the wide range of capabilities that other scripting languages do. Nevertheless, they can take you very far with some workarounds (and a bit of patience).</p>
<p>Although I am assuming that you are new to regex, I won’t cover everything there is to know about regular expressions. Instead, I will focus on how R works with regular expressions, as well as the R syntax that you will have to use for regex operations.</p>
<p>One of the best tools you must have in your toolkit is the R package <code>"stringr"</code> (by Hadley Wickham). It provides functions that have similar behavior to those of the base distribution in R. But it also provides many more facilities for working with regular expressions.</p>
<p>To know more about regular expressions in general, you can find some useful infor- mation in the following resources:</p>
<ul>
<li>Regex wikipedia: For those readers who have no experience with regular expressions, a good place to start is by checking the wikipedia entrance.</li>
</ul>
<p><a href="http://en.wikipedia.org/wiki/Regular_expression" target="_blank">http://en.wikipedia.org/wiki/Regular_expression</a></p>
<ul>
<li>Regular-Expressions.info website (by Jan Goyvaerts): An excelent website full of information about regular expressions. It contains many different topics, resources, lots of examples, and tutorials, covered at both beginner and advanced levels.</li>
</ul>
<p><a href="http://www.regular-expressions.info" target="_blank">http://www.regular-expressions.info</a></p>
<ul>
<li>Mastering Regular Expressions (by Jeffrey Friedl): I wasn’t sure whether to include this reference but I think it deserves to be considered as well. This is perhaps the authoritative book on regular expressions. The only issue is that it is a book better adressed for readers already experienced with regex.</li>
</ul>
<p><a href="http://regex.info/book.html" target="_blank">http://regex.info/book.html</a></p>
</section>
</section>
<section id="regex-basics" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="regex-basics"><span class="header-section-number">8.2</span> Regex Basics</h2>
<p>The main purpose of working with regular expressions is to describe patterns that are used to match against text strings. Simply put, working with regular expressions is nothing more than <strong>pattern matching</strong>. The result of a match is either successful or not.</p>
<p>The simplest version of pattern matching is to search for one occurrence (or all occurrences) of some specific characters in a string. For example, we might want to search for the word <code>"programming"</code> in a large text document, or we might want to search for all occurrences of the string <code>"apply"</code> in a series of files containing R scripts.</p>
<p>Typically, regular expression patterns consist of a combination of alphanumeric characters as well as special characters. A regex pattern can be as simple as a single character, or it can be formed by several characters with a more complex structure. In all cases we construct regular expressions much in the same form in which we construct arithmetic expressions, by using various operators to combine smaller expressions.</p>
</section>
<section id="literal-characters" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="literal-characters"><span class="header-section-number">8.3</span> Literal Characters</h2>
<p>We’re going to start with the simplest match of all: a <strong>literal character</strong>. A literal character match is one in which a given character such as the letter <code>"R"</code> matches the letter <em>R</em>. This type of match is the most basic type of regular expression operation: just matching plain text.</p>
<section id="matching-literal-characters" class="level3" data-number="8.3.1">
<h3 data-number="8.3.1" class="anchored" data-anchor-id="matching-literal-characters"><span class="header-section-number">8.3.1</span> Matching Literal Characters</h3>
<p>The following examples are extremely basic but they will help you get a good understanding of regex.</p>
<p>Consider the following text stored in a character vector <code>this_book</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>this_book <span class="ot">&lt;-</span> <span class="st">'This book is mine'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first regular expression we are going to work with is <code>"book"</code>. This pattern is formed by a letter <em>b</em>, followed by a letter <em>o</em>, followed by another letter <em>o</em>, followed by a letter <em>k</em>. As you may guess, this pattern matches the word <em>book</em> in the character vector <code>this_book</code>. To have a visual representation of the actual pattern that is matched, you should use the function <code>str_view()</code> from the package <code>"stringr"</code> (you may need to upgrade to a recent version of RStudio):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(this_book, <span class="st">'book'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As you can tell, the pattern <code>"book"</code> doesn’t match the entire content in the vector <code>this_book</code>; it just matches those four letters.</p>
<p>It may seem really simple but there are a couple of details to be highlighted. The first is that regex searches are case sensitive by default. This means that the pattern <code>"Book"</code> would not match <em>book</em> in <code>this_book</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"This Book is mine."</span>, <span class="st">'book'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can change the matching task so that it is case insensitive but we will talk about it later.</p>
<p>Let’s add more text to <code>this_book</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>this_book <span class="ot">&lt;-</span> <span class="st">'This book is mine. I wrote this book with bookdown.'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s use <code>str_view()</code> to see what pieces of text are matched in <code>this_book</code> with the pattern <code>"book"</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(this_book, <span class="st">"book"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As you can tell, only the first occurrence of <em>book</em> was matched. This is a common behavior of regular expressions in which they return a match as fast possible. You can think of this behavior as the “eager principle”, that is, regular expressions are eager and they will give preference to an early match. This is a minor but important detail and we will come back to this behavior of regular expressions.</p>
<p>All the letters and digits in the English alphabet are considered literal characters. They are called <em>literal</em> because they match themselves.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>str_view <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"I had 3 quesadillas for lunch"</span>, <span class="st">"3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is another example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>transport <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"car"</span>, <span class="st">"bike"</span>, <span class="st">"boat"</span>, <span class="st">"airplane"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first pattern to test is the letter <code>"a"</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(transport, <span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When you execute the previous command, you should be able to see that the letter <code>"a"</code> is highlighted in the words <em>car</em>, <em>boat</em> and <em>airplane</em>.</p>
</section>
</section>
<section id="r-functions-for-regular-expressions" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="r-functions-for-regular-expressions"><span class="header-section-number">8.4</span> R Functions for Regular Expressions</h2>
<p>In order to move on with the discussion of regular expressions, we need to talk about some of the functions available in R for regex.</p>
<section id="regex-functions-in-base-package" class="level3" data-number="8.4.1">
<h3 data-number="8.4.1" class="anchored" data-anchor-id="regex-functions-in-base-package"><span class="header-section-number">8.4.1</span> Regex Functions in <code>"base"</code> Package</h3>
<p>R contains a set of functions in the <code>"base"</code> package that we can use to find pattern matches. The following table lists these functions with a brief description:</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 36%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Purpose</th>
<th>Characteristic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>grep()</code></td>
<td>finding regex matches</td>
<td>which elements are matched (index or value)</td>
</tr>
<tr class="even">
<td><code>grepl()</code></td>
<td>finding regex matches</td>
<td>which elements are matched (<code>TRUE</code>,<code>FALSE</code>)</td>
</tr>
<tr class="odd">
<td><code>regexpr()</code></td>
<td>finding regex matches</td>
<td>positions of the first match</td>
</tr>
<tr class="even">
<td><code>gregexpr()</code></td>
<td>finding regex matches</td>
<td>positions of all matches</td>
</tr>
<tr class="odd">
<td><code>regexec()</code></td>
<td>finding regex matches</td>
<td>hybrid of <code>regexpr()</code> and <code>gregexpr()</code></td>
</tr>
<tr class="even">
<td><code>sub()</code></td>
<td>replacing regex matches</td>
<td>only first match is replaced</td>
</tr>
<tr class="odd">
<td><code>gsub()</code></td>
<td>replacing regex matches</td>
<td>all matches are replaced</td>
</tr>
<tr class="even">
<td><code>strsplit()</code></td>
<td>splitting regex matches</td>
<td>split vector according to matches</td>
</tr>
</tbody>
</table>
<p>The first five functions listed in the previous table are used for finding pattern matches in character vectors. The goal is the same for all these functions: <strong>finding a match</strong>. The difference between them is in the format of the output. The next two functions—<code>sub()</code> and <code>gsub()</code>— are used for <strong>substitution</strong>: looking for matches with the purpose of replacing them. The last function, <code>strsplit()</code>, is used to <strong>split</strong> elements of a character vector into substrings according to regex matches.</p>
<p>Basically, all regex functions require two main arguments: a <strong>pattern</strong> (i.e.&nbsp;regular expression), and a <strong>text</strong> to match. Each function has other additional arguments but the main ones are a pattern and some text. In particular, the <strong>pattern</strong> is basically a character string containing a regular expression to be matched in the given <strong>text</strong>.</p>
<p>You can check the documentation of all the <code>grep()</code>-like functions by typing <code>help(grep)</code> (or alternatively <code>?grep</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># help documentation for main regex functions</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(grep)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="regex-functions-in-package-stringr" class="level3" data-number="8.4.2">
<h3 data-number="8.4.2" class="anchored" data-anchor-id="regex-functions-in-package-stringr"><span class="header-section-number">8.4.2</span> Regex Functions in Package <code>"stringr"</code></h3>
<p>The R package <code>"stringr"</code> also provides several functions for regex operations (see table below). More specifically, <code>"stringr"</code> provides pattern matching functions to <em>detect</em>, <em>locate</em>, <em>extract</em>, <em>match</em>, <em>replace</em> and <em>split</em> strings.</p>
<table class="table">
<colgroup>
<col style="width: 45%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>str_detect()</code></td>
<td>Detect the presence or absence of a pattern in a string</td>
</tr>
<tr class="even">
<td><code>str_extract()</code></td>
<td>Extract <strong>first</strong> piece of a string that matches a pattern</td>
</tr>
<tr class="odd">
<td><code>str_extract_all()</code></td>
<td>Extract <strong>all</strong> pieces of a string that match a pattern</td>
</tr>
<tr class="even">
<td><code>str_match()</code></td>
<td>Extract <strong>first</strong> matched group from a string</td>
</tr>
<tr class="odd">
<td><code>str_match_all()</code></td>
<td>Extract <strong>all</strong> matched groups from a string</td>
</tr>
<tr class="even">
<td><code>str_locate()</code></td>
<td>Locate the position of the <strong>first</strong> occurence of a pattern in a string</td>
</tr>
<tr class="odd">
<td><code>str_locate_all()</code></td>
<td>Locate the position of <strong>all</strong> occurences of a pattern in a string</td>
</tr>
<tr class="even">
<td><code>str_replace()</code></td>
<td>Replace <strong>first</strong> occurrence of a matched pattern in a string</td>
</tr>
<tr class="odd">
<td><code>str_replace_all()</code></td>
<td>Replace <strong>all</strong> occurrences of a matched pattern in a string</td>
</tr>
<tr class="even">
<td><code>str_split()</code></td>
<td>Split up a string into a variable number of pieces</td>
</tr>
<tr class="odd">
<td><code>str_split_fixed()</code></td>
<td>Split up a string into a fixed number of pieces</td>
</tr>
</tbody>
</table>
<p>One of the important things to keep in mind is that all pattern matching functions in <code>"stringr"</code> have the following general form:</p>
<pre><code>str_function(string, pattern)</code></pre>
<p>The main two arguments are: a <code>string</code> vector to be processed , and a single <code>pattern</code> (i.e.&nbsp;regular expression) to match. Moreover, all the function names begin with the prefix <code>str_</code>, followed by the name of the action to be performed. For example, to locate the position of the first occurence, we should use <code>str_locate()</code>; to locate the positions of all matches we should use <code>str_locate all()</code>.</p>
</section>
<section id="matching-literal-characters-with-stringr-functions" class="level3" data-number="8.4.3">
<h3 data-number="8.4.3" class="anchored" data-anchor-id="matching-literal-characters-with-stringr-functions"><span class="header-section-number">8.4.3</span> Matching Literal Characters With <code>"stringr"</code> Functions</h3>
<p>Having introduced the regex functions available in <code>"stringr"</code>, let’s continue describing how to omatch literal characters. We had defined a string <code>this_book</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>this_book <span class="ot">&lt;-</span> <span class="st">'This book is mine. I wrote this book with bookdown.'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can use the function <code>str_detect()</code> to look for the pattern <code>"book"</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="at">string =</span> this_book, <span class="at">pattern =</span> <span class="st">"book"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>If there is a match, then <code>{str_detect()</code> returns <code>TRUE</code>. Conversely, if there is no match, <code>str_detect()</code> will return <code>FALSE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="at">string =</span> this_book, <span class="at">pattern =</span> <span class="st">'tablet'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>All the letters and digits in the English alphabet are considered literal characters. They are called <em>literal</em> because they match themselves.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>str_detect <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">string =</span> <span class="st">"I had 3 quesadillas for lunch"</span>, <span class="at">pattern =</span> <span class="st">"3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is another example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>transport <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"car"</span>, <span class="st">"bike"</span>, <span class="st">"boat"</span>, <span class="st">"airplane"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first pattern to test is the letter <code>"a"</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="at">string =</span> transport, <span class="at">pattern =</span> <span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When you execute the previous command, you should be able to see that the letter <code>"a"</code> is highlighted in the words <em>car</em>, <em>boat</em> and <em>airplane</em>.</p>
</section>
</section>
<section id="metacharacters" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="metacharacters"><span class="header-section-number">8.5</span> Metacharacters</h2>
<p>The next topic that you should learn about regular expressions has to do with <strong>metacharacters</strong>. As you just learned, the most basic type of regular expressions are the literal characters which are characters that match themselves. However, not all characters match themselves. Any character that is not a literal character is a metacharacter.</p>
<section id="about-metacharacters" class="level3" data-number="8.5.1">
<h3 data-number="8.5.1" class="anchored" data-anchor-id="about-metacharacters"><span class="header-section-number">8.5.1</span> About Metacharacters</h3>
<p>Metacharacter are characters that have a special meaning and they allow you to transform literal characters in very interesting ways. Sometimes they act like mathematical operators: transforming literal characters into powerful expressions.</p>
<p>Below is the list of metacharacters in <em>Extended Regular Expressions</em> (EREs):</p>
<pre><code>.   \   |   (   )   [   ]   {   }   $   -    ^   *   +   ?</code></pre>
<ul>
<li>the dot <code>.</code></li>
<li>the backslash <code>\</code></li>
<li>the bar <code>|</code></li>
<li>left or opening parenthesis <code>(</code></li>
<li>right or closing parenthesis <code>)</code></li>
<li>left or opening bracket <code>[</code></li>
<li>right or closing bracket <code>]</code></li>
<li>left or opening brace <code>{</code></li>
<li>right or closing brace <code>}</code></li>
<li>the dollar sign <code>$</code></li>
<li>the dash, hyphen or minus sign <code>-</code></li>
<li>the caret or hat <code>^</code></li>
<li>the star or asterisk <code>*</code></li>
<li>the plus sign <code>+</code></li>
<li>the question mark <code>?</code></li>
</ul>
<p>For example, the pattern <code>"money\$"</code> does not match “money$”. Likewise, the pattern <code>"what?"</code> does not match “what?”. Except for a few cases, metacharacters have a special meaning and purporse when working with regular expressions.</p>
<p>We’re going to be working with these characters throughout the rest of the book. Simply put, everything else that you need to know about regular expressions besides literal characters is how these metacharacters work. The good news is that there are only a few metacharacters to learn. The bad news is that some metacharacters can have more than one meaning. And learning those meanings definitely takes time and requires hours of practice. The meaning of the metacharacters greatly depend on the context in which you use them, how you use them, and where you use them. If it wasn’t enough complication, it is also the metacharacters that have variation between the different regex engines.</p>
</section>
</section>
<section id="the-wildcard-metacharacter" class="level2" data-number="8.6">
<h2 data-number="8.6" class="anchored" data-anchor-id="the-wildcard-metacharacter"><span class="header-section-number">8.6</span> The Wildcard Metacharacter</h2>
<p>The first metacharacter you should learn about is the dot or period <code>"."</code>, better known as the <strong>wildcard</strong> metacharacter.</p>
<p>Like in many card games where one of the cards in the deck is wild and can be used to replace other types of cards, there is also a wild character in regex that has the same purpose—hence its name.</p>
<p>This metacharacter is used to match <strong>ANY</strong> character except for a new line.</p>
<p>For example, consider the pattern <code>"p.n"</code>, that is, <em>p wildcard n</em>. This pattern will match <em>pan</em>, <em>pen</em>, and <em>pin</em>, but it will not match <em>prun</em> or <em>plan</em>. The dot only matches one single character.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>pns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'pan'</span>, <span class="st">'pen'</span>, <span class="st">'pin'</span>, <span class="st">'plan'</span>, <span class="st">'prun'</span>, <span class="st">'p n'</span>, <span class="st">'p</span><span class="sc">\n</span><span class="st">n'</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="at">string =</span> pns, <span class="at">pattern =</span> <span class="st">'p.n'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE  TRUE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p>Observe that <code>"p.n"</code> even matches the blank space, and the new line character <code>"\n"</code>. The reason why it does not match <code>plan</code> is because the third character is an <code>a</code> and not an <code>n</code>.</p>
<p>Let’s see another example using the vector <code>c("not", "note", "knot", "nut")</code> and the pattern <code>"n.t"</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>not <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"not"</span>, <span class="st">"note"</span>, <span class="st">"knot"</span>, <span class="st">"nut"</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(not, <span class="st">"n.t"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>the pattern <code>"n.t"</code> matches <em>not</em> in the first three elements, and <em>nut</em> in the last element.</p>
<p>If you specify a pattern <code>"no."</code>, then just the first three elements in <code>not</code> will be matched.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(not, <span class="st">"no."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And if you define a pattern <code>"kn."</code>, then only the third element is matched.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(not, <span class="st">"kn."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The wild metacharacter is probably the most used metacharacter, and it is also the most abused one, being the source of many mistakes. Here is a basic example with the regular expression formed by <code>"5.00"</code>. If you think that this pattern will match five with two decimal places after it, you will be surprised to find out that it not only matches <em>5.00</em> but also <em>5100</em> and <em>5-00</em>. Why? Because <code>"."</code> is the metacharacter that matches absolutely anything. You will learn how to fix this mistake in the next section, but it illustrates an important fact about regular expressions: the challenge consists of matching what you want, but also in matching only what you want. You don’t want to specify a pattern that is overly permissive. You want to find the thing you’re looking for, but only that thing.</p>
<p>As an experiment, try writing a pattern that will match <em>silver</em>, <em>sliver</em>, and <em>slider</em>. See if you can use wildcards to come up with a regular expression that will match all three of those.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>sil <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'silver'</span>, <span class="st">'sliver'</span>, <span class="st">'slider'</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># your pattern</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>pat <span class="ot">&lt;-</span> ...</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># test it</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="at">string =</span> sil, <span class="at">pattern =</span> pat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="escaping-metacharacters" class="level3" data-number="8.6.1">
<h3 data-number="8.6.1" class="anchored" data-anchor-id="escaping-metacharacters"><span class="header-section-number">8.6.1</span> Escaping metacharacters</h3>
<p>What if you just want to match the character dot? For example, say you have the following vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>fives <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"5.00"</span>, <span class="st">"5100"</span>, <span class="st">"5-00"</span>, <span class="st">"5 00"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you try the pattern <code>"5.00"</code>, it will match all of the elements in <code>fives</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fives, <span class="st">"5.00"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To actually match the dot character, what you need to do is <strong>escape</strong> the metacharacter. In most languages, the way to escape a metacharacter is by adding a backslash character in front of the metacharacter: <code>"\."</code>. When you use a backslash in front of a metacharacter you are “escaping” the character, this means that the character no longer has a special meaning, and it will match itself.</p>
<p>However, R is a bit different. Instead of using a backslash you have to use two backslashes: <code>"5\\.00"</code>. This is because the backslash <code>"\"</code>, which is another metacharacter, has a special meaning in R. Therefore, to match just the element <em>5.00</em> in <code>fives</code> in R, you do it like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fives, <span class="st">"5</span><span class="sc">\\</span><span class="st">.00"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following list shows the general regex metacharacters and how to escape them in R:</p>
<table class="table">
<thead>
<tr class="header">
<th>Metachacter</th>
<th>Literal meaning</th>
<th>Escape in R</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.</code></td>
<td>the period or dot</td>
<td><code>"\\."</code></td>
</tr>
<tr class="even">
<td><code>$</code></td>
<td>the dollar sign</td>
<td><code>"\\$"</code></td>
</tr>
<tr class="odd">
<td><code>*</code></td>
<td>the asterisk or star</td>
<td><code>"\\*"</code></td>
</tr>
<tr class="even">
<td><code>+</code></td>
<td>the plus sign</td>
<td><code>"\\+"</code></td>
</tr>
<tr class="odd">
<td><code>?</code></td>
<td>the question mark</td>
<td><code>"\\?"</code></td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td>the vertical bar</td>
<td><code>"\\|"</code></td>
</tr>
<tr class="odd">
<td><code>\</code></td>
<td>the backslah</td>
<td><code>"\\\\"</code></td>
</tr>
<tr class="even">
<td><code>^</code></td>
<td>the caret or hat</td>
<td><code>"\\^"</code></td>
</tr>
<tr class="odd">
<td><code>[</code></td>
<td>the opening bracket</td>
<td><code>"\\["</code></td>
</tr>
<tr class="even">
<td><code>]</code></td>
<td>the closing bracket</td>
<td><code>"\\]"</code></td>
</tr>
<tr class="odd">
<td><code>{</code></td>
<td>the opening brace</td>
<td><code>"\\{"</code></td>
</tr>
<tr class="even">
<td><code>}</code></td>
<td>the closing brace</td>
<td><code>"\\}"</code></td>
</tr>
<tr class="odd">
<td><code>(</code></td>
<td>the opening parenthesis</td>
<td><code>"\\("</code></td>
</tr>
<tr class="even">
<td><code>)</code></td>
<td>the closing parenthesis</td>
<td><code>"\\)"</code></td>
</tr>
</tbody>
</table>
<p>Here are some silly examples that show how to escape metacharacters in R in order to be replaced with an empty <code>""</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dollar</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"$Peace-Love"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">$"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Peace-Love"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dot</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace.Love"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PeaceLove"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plus</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace+Love"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">+"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PeaceLove"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># caret</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace^Love"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">^"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PeaceLove"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vertical bar</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace|Love"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PeaceLove"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># opening round bracket</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace(Love)"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">("</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PeaceLove)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># closing round bracket</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace(Love)"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">)"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Peace(Love"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># opening square bracket</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace[Love]"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">["</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PeaceLove]"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># closing square bracket</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace[Love]"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Peace[Love"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># opening curly bracket</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace{Love}"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">{"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PeaceLove}"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># closing curly bracket</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace{Love}"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">}"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Peace{Love"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># double backslash</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"Peace</span><span class="sc">\\</span><span class="st">Love"</span>, <span class="st">"</span><span class="sc">\\\\</span><span class="st">"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PeaceLove"</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./07-input-output.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Input and Output</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./09-regex-charsets.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Character Sets</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2024, <a href="https://www.gastonsanchez.com">Gaston Sanchez</a></div>   
    <div class="nav-footer-right"><a href="https://www.paypal.com/donate?business=ZF6U7K5MW25W2&amp;currency_code=USD" target="_blank">Donate via PayPal</a></div>
  </div>
</footer>



</body></html>